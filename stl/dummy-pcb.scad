// BMO Controller - Exact G-Code Reconstruction
// 154 points extracted directly from Gerber file
// Units: mm

$fn = 60;

module bmo_exact_shape() {
    linear_extrude(height = 1.6) {
        polygon(points=[
            // The exact outline path from your Gerber
            [98.462, 0.0], [37.01, 0.063], [36.493, 0.145], [35.988, 0.281], [35.5, 0.469], 
            [35.034, 0.706], [34.595, 0.991], [34.189, 1.321], [33.819, 1.691], [33.49, 2.098], 
            [33.205, 2.536], [32.967, 3.003], [32.78, 3.491], [32.645, 3.996], [32.563, 4.513], 
            [32.536, 5.036], [32.464, 5.303], [32.396, 5.846], [32.21, 6.36], [31.915, 6.821], 
            [31.525, 7.206], [31.061, 7.494], [30.544, 7.674], [24.5, 7.734], [18.5, 13.536], 
            [4.477, 13.563], [3.96, 13.645], [3.455, 13.78], [2.966, 13.968], [2.5, 14.205], 
            [2.061, 14.49], [1.654, 14.82], [1.284, 15.19], [0.955, 15.597], [0.67, 16.036], 
            [0.432, 16.502], [0.245, 16.99], [0.109, 17.496], [0.027, 18.013], [0.0, 18.536], 
            [0.027, 40.023], [0.109, 40.54], [0.245, 41.045], [0.432, 41.534], [0.67, 42.0], 
            [0.955, 42.439], [1.284, 42.846], [1.654, 43.216], [2.061, 43.545], [2.5, 43.83], 
            [2.966, 44.068], [3.455, 44.255], [3.96, 44.391], [4.477, 44.473], [5.0, 44.5], 
            [27.0, 44.5], [27.523, 44.527], [28.04, 44.609], [28.545, 44.745], [29.034, 44.932], 
            [29.5, 45.17], [29.939, 45.455], [30.346, 45.784], [30.716, 46.154], [31.045, 46.561], 
            [31.33, 47.0], [31.568, 47.466], [31.755, 47.955], [31.891, 48.46], [31.973, 48.977], 
            [32.028, 50.024], [32.11, 50.542], [32.246, 51.049], [32.435, 51.539], [32.673, 52.006], 
            [32.96, 52.446], [33.291, 52.853], [33.663, 53.223], [34.071, 53.552], [34.512, 53.837], 
            [34.98, 54.074], [35.471, 54.26], [35.978, 54.394], [36.497, 54.475], [37.021, 54.5], 
            [55.006, 54.435], [55.522, 54.351], [56.025, 54.215], [56.512, 54.026], [56.976, 53.788], 
            [57.413, 53.502], [57.818, 53.173], [58.187, 52.803], [58.514, 52.397], [58.798, 51.959], 
            [59.034, 51.493], [59.221, 51.006], [59.356, 50.501], [59.437, 49.986], [59.464, 49.464], 
            [59.594, 47.775], [59.696, 47.279], [59.848, 46.797], [60.047, 46.332], [60.293, 45.89], 
            [60.582, 45.475], [60.911, 45.091], [61.278, 44.742], [61.678, 44.433], [62.107, 44.165], 
            [62.561, 43.942], [63.035, 43.766], [63.525, 43.639], [64.025, 43.562], [64.53, 43.536], 
            [98.993, 43.472], [99.511, 43.389], [100.017, 43.253], [100.506, 43.064], [100.973, 42.825], 
            [101.412, 42.539], [101.818, 42.208], [102.188, 41.837], [102.517, 41.429], [102.801, 40.988], 
            [103.038, 40.52], [103.224, 40.03], [103.359, 39.524], [103.439, 39.006], [103.464, 38.482], 
            [103.464, 5.0], [103.437, 4.477], [103.355, 3.96], [103.22, 3.454], [103.032, 2.966], 
            [102.794, 2.499], [102.509, 2.06], [102.179, 1.653], [101.809, 1.283], [101.402, 0.954], 
            [100.963, 0.669], [100.496, 0.431], [100.007, 0.244], [99.502, 0.109], [98.984, 0.027]
        ]);
    }
}

difference() {
    bmo_exact_shape();

    // MOUNTING HOLES (Exact from Drill File)
    // Normalized to match the new 0,0 origin
    
    // Hole 1: Top Left
    translate([91.5 - 85.5, -78.5 + 115.5, -1]) cylinder(h=5, d=3.2);

    // Hole 2: Bottom Left
    translate([91.5 - 85.5, -96.5 + 115.5, -1]) cylinder(h=5, d=3.2);

    // Hole 3: Bottom Right
    translate([171.0 - 85.5, -109.5 + 115.5, -1]) cylinder(h=5, d=3.2);

    // Hole 4: Top Right
    translate([183.0 - 85.5, -78.0 + 115.5, -1]) cylinder(h=5, d=3.2);
}